#include <Arduino.h>
#include <zirconLib.h>

int direccion = 1; // 0 = derecha, 1 = izquierda

// NOMBRAR SENSORES 
int s1 = readLine(1); // Izquierda
int s2 = readLine(2); // Centro
int s3 = readLine(3); // Derecha


// LUMINOSIDADES COLORES (min, max) 

// Luminosidad del s1 
bool blanco_s1 = (s1 >= 575) && (s1 <= 753); 
bool verde_s1 = (s1 >= 210) && (s1 <= 340); 
bool negro_s1 = (s1 >= 174) && (s1 <= 227); 

// Luminosidad del s2
bool blanco_s2 = (s2 >= 494) && (s2 <= 762); 
bool verde_s2 = (s2 >= 370) && (s2 <= 467); 
bool negro_s2 = (s2 >= 418) && (s2 <= 422); 

// Luminosidad del s3
bool blanco_s3 = (s3 >= 590) && (s3 <= 754); 
bool verde_s3 = (s3 >= 254) && (s3 <= 342); 
bool negro_s3 = (s3 >= 234) && (s3 <= 269); 
//FUNCION GIRAR 
float girar(float angulo) {
  float tiempo = abs(angulo * 50 / 47.0);
 
   if (angulo>=0){
  motor1(100, 1);
  motor2(100, 1);
  motor3(100, 1);
  delay(tiempo);
  motor1(0, 1);
  motor2(0, 1);
  motor3(0, 1);
   }
   else
   {
  motor1(100, 0);
  motor2(100, 0);
  motor3(100, 0);
  delay(tiempo);
  motor1(0, 0);
  motor2(0, 0);
  motor3(0, 0);
   }
  return tiempo;
}

void setup(void) {
Serial.begin(9600); 
InitializeZircon(); 
}
void loop(void) 
{

// IMPRIMIR LOS VALORES DE LUMINICIDAD DE CADA SENSOR 
Serial.print("S1: "); Serial.print(s1);
Serial.print("\tS2: "); Serial.print(s2);
Serial.print("\tS3: "); Serial.print(s3);


// LOGICA DE OSILACION EN EL ARCO  
if ( blanco_s1&& blanco_s2 && verde_s3){
  motor1(95,0);
  motor2(50,1);
  motor3(75,1);
  //delay(2000); 
  //motor1(0,0);
  //motor2(0,1);
  //motor3(0,1); 
  //delay(500);
  //motor1(100, 1);
  //motor2(75, 0);
  //motor3(50, 0);
  //delay(2000);
  //motor1(0,0);
  //motor2(0,1);
  //motor3(0,1); 
  //delay(500);
}
else if (blanco_s1&& verde_s2&& verde_s3){
  girar(5);
}
else if ( verde_s1&& blanco_s2&& verde_s3){
girar(5);
}
}
